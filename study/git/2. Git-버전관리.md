## Git 버전관리



### git을 시작하고 커밋하기



처음에는 자신이 누구인지를 알려줘야 한다.



- `git config user.name "qbit"`
- `git config user.email "qbit@gmail.com"` 



이런 식으로 name과 email을 알려주고 git을 시작하면 된다.



- `git init`: initialize repository(버전관리를 시작하라는 뜻)

- `git status`: working tree status

- `git add`: add to staging area

- `git commit`: create version

  `git commit -m " "`: 어떤 내용인지 간략하게 기재

  `git commit --amend`: 이미 커밋된 것을 버전 이름 바꾸고 싶을 때

- `git log`: 전체적인 로그 기록 확인

  `git log --stat`: 로그 기록을 파일의 상태까지 확인

  `git log -p`: 전체적인 변화를 더 구체적으로 확인

  `git log --pretty=oneline`: 간략하게 로그 기록 확인

  `git log --all --graph`: 그래프(트리) 형식으로 로그 기록 확인

  `git log --all --graph --oneline`: 그래프(트리) 형식으로 로그 기록을 한 줄씩 간략하게 확인

- `git diff`: show changes(커밋하기 전에 바뀐점이 무엇인가 확인해 보는 과정)

  `git diff (version) (version)`: 두 버전간에 커밋 차이를 확인할 때 사용한다.

- `git show (version)`: 어떤 버전의 로그 기록을 확인

- `git reset --hard`: 작업한 내용이 사라짐



주의해야 할 점은 `add`를 통해서 `staging area`라는 곳에 올라간 뒤 `commit`을 진행해야 한다는 것이다. `add` 없이 `commit`하려고 하면 에러가 뜬다. `add`에 대해서 더 알고 싶다면 `git add help`라고 쳐보자.



`git commit`을 해주게 됐을 때 `-m`을 추가적으로 써준게 아니라면 새로운 창이 뜨게 되고 커밋 메시지를 적어주어야 한다. I가 insert 상태이므로 글을 쓸 수 있고 `esc + :wq + enter`까지 하게 되면 `commit` 완료이다.



`git reset`은 `git add`와 반대되는 개념이다. 즉 `staging area`에 `add`한 파일을 `git reset (파일명)`으로 리셋시킬 수 있다. 다시 말하면 `staging area`에서 내려오는 것이지 변경된 새 모습은 working directory에 남아있는 것이다.



### 이전 버전으로 돌아가기



master는 최신 버전이라고 생각하면 된다. `HEAD -> master` 혹은 `HEAD -> main`라는 것은 현재 마지막 버전을 가리키고 있는 것이다. 그런데 커밋하기 이전 버전으로 돌아가고 싶을 때가 있다. 이 때는 우선 `git log`를 통해 커밋 버전을 확인해 준다. 



커밋 옆에는 version id가 존재하는데 이것을 `git checkout (version)`에 넣어주면 그 버전으로 돌아갈 수 있다. 그렇다고 해서 최근에 만든 버전들이 삭제되는 것은 아니다. 가장 최근(master or main)으로 돌아오고 싶다면 `git checout master`라고 입력하면 된다. version id는 굉장히 긴데 앞에 4~6자리만 적어주어도 된다. 웬만하면 겹치지 않기 때문이다.



- `git checkout (version)`: 특정 버전 상태로 가기
- `git checkout master`: 특정 버전에서 가장 최근 버전으로 가기(main일 수도 있음)



### 버전 삭제와 되돌리기



- `git reset --hard (version)` : 리셋하고 싶을 때 이 (version)으로 리셋하기 : `버전 삭제`

- `git revert (version)`: 최근 버전들이 삭제되는 것이 아니라 이 (version)으로 새롭게 커밋이 된다. : `버전 되돌리기`



말이 조금 어렵지만 직접 사용하다 보면 이해할 수 있다. 즉 위에서 살펴본 `checkout`과는 다르게 `reset`은 말 그대로 그 '버전'으로 리셋이 되는 것이고, `revert`는 예전 '버전'으로 새롭게 커밋하는 것이다. `revert`할 때는 주의할 점이 있는데 연속으로 할 경우 충돌할 수 있기 때문에 시간상 역순으로 해 주어야 한다.



version1 -> version2 -> version3 -> version4 순으로 커밋을 해왔다면 version2로 되돌리고 싶을 경우 version3으로 `revert`하는 과정을 거쳐야 한다는 것이다.



> 이 포스팅은 이고잉님의 생활코딩 강의를 기반으로 재구성하였습니다.



