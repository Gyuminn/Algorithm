## 출처

https://www.acmicpc.net/problem/1157





## 문제

알파벳 대소문자로 된 단어가 주어지면, 이 단어에서 가장 많이 사용된 알파벳이 무엇인지 알아내는 프로그램을 작성하시오. 단, 대문자와 소문자를 구분하지 않는다.





## 입력

첫째 줄에 알파벳 대소문자로 이루어진 단어가 주어진다. 주어지는 단어의 길이는 1,000,000을 넘지 않는다.





## 출력

첫째 줄에 이 단어에서 가장 많이 사용된 알파벳을 대문자로 출력한다. 단, 가장 많이 사용된 알파벳이 여러 개 존재하는 경우에는 ?를 출력한다.





## 예제입력 1

```javascript
Mississipi
```



## 예제출력 1

```javascript
?
```



## 예제입력 2

```javascript
zZa
```



## 예제출력 2

```javascript
Z
```



## 예제입력 3

```javascript
z
```



## 예제출력 3

```javascript
Z
```



## 예제입력 4

```javascript
baaa
```



## 예제출력 4

```javascript
A
```







## 풀이 및 코드



> `readline` 모듈에 기반하여 풀이하고 있다.



지금까지 풀었던 문제중에 가장 시간이 오래걸렸고, 왜 틀렸는지 원인 모를 상황에 꽤나 애먹었던 문제였다. 매우 난잡하지만 우선적으로 본인이 작성한 코드의 로직은 다음과 같다.



- 입력받은 문자를 모두 대문자화 시킨다.

- 입력받은 문자열을 오름차순으로 정렬하고, 각 문자별로 카운트를 세어 준다.

- 어떤 문자가 몇 번 나왔는지 알기 위해서 두 개의 배열을 만들어 push 해준다.

  예) mississipi => IIIIMPSSSS => [I,M,P,S] , [4,1,1,4]

- 최대값이 최소 2개임을 확인하기 위해 하나의 배열을 추가적으로 만들어주고 오름차순으로 만들어 준다.

  예) [1,1,4,4]

- 추가적인 배열의 끝에 두 인덱스를 비교했을 때 두 요소가 같은 수 이므로 이 경우에는 물음표를 출력해준다.

- 그렇지 않을 경우 최대값은 겹치지 않고, 최대값을 찾아 그 인덱스에 맞는 문자열을 출력

  예) zZa => AZZ => [A,Z], [1,2] => 2 값에 해당하는 두 번째 인덱스인 'Z'를 출력

  예) baaa => AAAB => [A,B], [3, 1] => 3 값에 해당하는 첫 번째 인덱스인 'A'를 출력



이 방법으로 풀이한 코드는 아래 코드와 같다.



```javascript
const readline = require("readline");

const rl = readline.createInterface({
    input:process.stdin,
    output:process.stdout,
})

function lineHandler(line) {
    const str = line.toUpperCase();
    
    strArray = str.split('').sort();
    let count = 1;
    let maxString = strArray[0];
    
    let stringOrder = [];
    let stringCount = [];
    let stringCountOrder = [];

    for(let i = 0; i < strArray.length; i ++) {
        if(maxString === strArray[i+1]) {
            count++; // 한 문자가 몇 번 나왔는지 count
        }

        if(maxString !== strArray[i+1]) { // 다른 문자가 나왔을 경우
            stringOrder.push(maxString); // 기존에 세었던 문자열을 배열에 push
            stringCount.push(count); // 해당 문자열에 해당하는 count 값을 저장하기 위해 push
            stringCountOrder.push(count); // 오름차순으로 만들 배열 하나를 추가적으로 만들기
            maxString = strArray[i+1]; // 다른 문자로 설정
            count = 1; // count를 1로 초기화
        }
    }

    stringCountOrder = stringCountOrder.sort(); // 추가적인 배열을 오름차순으로 정렬
    if(stringCountOrder[stringCountOrder.length - 1] === stringCountOrder[stringCountOrder.length - 2]) {
        console.log("?"); // 최대값이 겹칠 경우 물음표를 출력
    } else { // 아닐 경우
        console.log(stringOrder[stringCount.indexOf(Math.max(...stringCount))]); // 최대값에 해당하는 문자열 출력
    }

    rl.close();
}

function closeHandler() {
    process.exit();
}

rl.on("line",lineHandler);
rl.on("close", closeHandler);
```



그러나 분명 터미널에서 많은 케이스를 대입해 보아도 주어진 조건을 모두 만족하는데, 백준 채점에서 50%를 지나가자 틀렸다고 문구가 뜬다. 왜 틀렸는지 도무지 알 수가 없지만, 다른 방법을 찾아야 했고 다음 링크의 풀이를 참고하였다.



> https://gurtn.tistory.com/49



다른 풀이방법으로는 빈 배열을 이용하는 것이다. 로직은 다음과 같다.



- 입력받은 문자열을 `toUpperCase()`를 통해 대문자로 변환해준다.
- A-Z까지 배열을 만들어 0을 채워준다.
- 대문자로 변환해준 문자열을 `charCodeAt()`을 통해 `UTF-16` 코드로 반환한다.
- `UTF-16` 코드로 반환한 값에 최소값인 65( 대문자 A )를 빼주고, 이 인덱스에 해당하는 배열의 값을 증가시킨다.
- 최대값과 그에 해당하는 index값을 찾는다.
- 최대값이 복수인 경우를 찾기 위해서 `for`문을 통해 전체적으로 검사를 해준다.
- 복수인 경우 ?를 출력하고 아닐 경우 `fromCharCode()`를 통해 최대값을 가지는 문자열을 출력해준다.



```javascript
const readline = require("readline");

const rl = readline.createInterface({
    input:process.stdin,
    output:process.stdout,
})

function lineHandler(line) {
    const upperStr = line.toUpperCase(); // 입력받은 문자열을 대문자로 변환
    let countArray = new Array(26).fill(0); // 0으로 채운 길이 26의 배열 만들기

    for(let i = 0; i < upperStr.length; i++) { 
        countArray[upperStr.charCodeAt(i) - 65] ++; // UTF-16코드로 변환 뒤 65만큼 뺀 값의 인덱스 값을 증가
    }

    const max = Math.max(...countArray); // max 값 찾기
    const index = countArray.indexOf(max); // max 값이 있는 index값 찾기

    let isSame = false; // 최대값이 복수가 아닌 경우 기본값 false

    for(let i = 0; i < countArray.length; i++) {
        if(countArray[i] === max && index !== i) { // 최대값이 복수일 경우
            isSame = true; // isSame에 true값 저장
        }
    }

    if(isSame) {
        console.log("?"); // 최대값이 복수일 경우 = isSame은 true
    } else {
        console.log(String.fromCharCode(index + 65)); // 최대값이 복수가 아닌 경우 문자열로 변환하여 출력
    }
    
    rl.close();
}

function closeHandler() {
    process.exit();
}
rl.on("line", lineHandler);
rl.on("close", closeHandler);
```

