> 이 포스팅은 이고잉님의 생활코딩 강의와 노마드코더 클론코딩 강의를 기반으로 재구성하였습니다.

## Input Value

### 1. input value를 받고 콘솔에 출력해보기



```html
<!-- input 버튼을 만들어 값을 입력받기 위한 html 코드 -->
<body>
    <form id = "login-form">
        <input required maxlength="15" type = "text" placeholder = "What is your name?"/>
        <button>
            Log In
        </button>
    </form>
    <script src = "app.js"></script>
</body>
```



```javascript
// 입력받은 값을 콘솔에서 출력해보도록 하는 app.js 파일 //
const loginInput = document.querySelector("#login-form input");
const loginButton = document.querySelector("#login-form button");

function onLoginBtnClick() {
    const username = loginInput.value;
    
    console.log(username);
}

loginButton.addEventListener("clicK", onLoginBtnClick);
```



위 예제에서 버튼을 누르게 되면, `form` 태그 안의 `input` 태그는 값을 입력받고 새로고침되며 자동적으로 `submit`을 실행하게 된다. 우리는 이렇게 기본적으로 새로고침하고 싶지는 않으며 어차피 `submit`되기 때문에 더 이상 `click` event가 중요하지 않다.



```javascript
// 자동적으로 submit 되는 것을 막기 //

function onLoginSubmit(event) {
    event.preventDefault();
    console.log(event);
}

loginForm.addEventListener("submit", onLoginSubmit); // loginForm을 위한 html 코드는 생략
```

위 코드와 같이 수정해 줄 때, `submit` event를 통해 함수를 호출하는데 이 함수에 첫 번째 인자를 지정해준다. 그러면 방금 일어난 event의 정보를 가지고 함수를 호출하게 되고(관행적으로 event라는 이름의 객체를 인자로 보내준다) `preventDefault()`를 통해서 기본적인 행동들을 막아줄 수 있다.



### 2. input value를 받고 유저에게 인사해보기



```html
<!-- input 버튼을 만들어 값을 입력받기 위한 html 코드 -->
<body>
    <form id = "login-form">
        <input required maxlength="15" type = "text" placeholder = "What is your name?"/>
        <button>Log In</button>
    </form>
    <h1 id = "greeting" class = "hidden"></h1> <!-- 처음에는 h1 태그는 가릴 것이다 -->
    <script src = "app.js"></script>
</body>
```

```css
.hidden {
    display:none;
}
```

```javascript
const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("#login-form input");
const greeting = document.querySelector("#greeting");

const HIDDEN_CLASSNAME = "hidden"; // 중복의 제거, 보수 용이

function onLoginSubmit(event) {
    event.preventDefault(); // 새로고침 방지
    loginForm.classList.add(HIDDEN_CLASSNAME); // form 태그를 사라지게 만들어준다.
    const username = loginInput.value; // input 태그로 받은 값을 username에 저장해준다.
    greeting.innerText = `Hello ${username}`; // innerText로 h1 태그에 값을 넣어준다.
    greeting.classList.remove(HIDDEN_CLASSNAME); // hidden class를 제거함으로써 눈에 보이게 만들어 준다.
}

loginForm.addEventListener("submit", onLoginSubmit);
```



username에 값을 받아 저장하고 백틱을 이용해 `string`과 변수를 결합하여 `innerText`로 `h1` 태그 안에 넣어주는 방법이다. 그리고 `loginForm`에는 `hidden` class를 추가해서 안보이게 만들어준다. 참고로 `HIDDEN_CLASSNAME`은 관행적인 것인데, 문자열만 변수로 가질 때 이렇게 대문자로 표현해 준다.



### 3. input value를 저장해 보기



user에게 계속 물어보고 값을 입력받을 수는 없으니 저장을 해야 하는데 가장 쉬운 방법이 `local storage`이다. 이건 브라우저에게 값을 저장하게 해준다. `local storage API`에서 `setItem`과 `getItem`으로 저장하고 불러올 수 있다. 또한 `removeItem`으로 값(Key, Value)을 삭제할 수 있다. 작은 database같은 개념! (크롬 브라우적 기준 개발자 도구 Application 의 Stroage 부분에서 확인할 수 있다)

2번까지의 예제에서 새로고침을 의도적으로 막아주었는데, 별개로 직접 새로고침을 해주게 된다면 `form`이 다시 나타난다. 이미 값을 받아놓은 상태에서는 새로고침을 하더라도 `form`이 나타나는 것을 원하지 않기 때문에 처음부터 `form`에도 `hidden` class를 추가해주고 시작하자.(HTML 코드는 생략)



```javascript
const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("#login-form input");
const greeting = document.querySelector("#greeting");

const HIDDEN_CLASSNAME = "hidden";
const USERNAME_KEY = "username";

function onLoginSubmit(event) {
    event.preventDefault();
    loginForm.classList.add(HIDDEN_CLASSNAME);
    localStorage.setItem("USERNAME_KEY", loginInput.value); // 받은 값을 local storage에 저장
    paintGreetings(username); // username을 저장했으니 유저에게 인사해 주기 위해 함수 호출
}

function paintGreetings(username) {
    const userName = localStorage.getItem("USERNAME_KEY");
    greeting.innerText = `Hello ${userName}`; // 유저에게 인사하기
    greeting.classList.remove(HIDDEN_CLASSNAME); // hidden class를 삭제하여 드러내기
}

const savedUsername = localStorage.getItem("USERNAME_KEY");

if (savedUsername === null) {
    loginForm.classList.remove(HIDDEN_CLASSNAME);
    loginForm.addEventListener("submit", onLoginSubmit);
} else {
    paintGreetings(savedUsername);
}
```



위 코드의 로직 순서는 다음과 같다.

- `savedUsername` 변수에 local storage로부터 값을 받아온다. 
- 처음에는 값이 없을 것이므로 null일 경우 `if`문으로 작성하여 `form`에서 `hidden` class를 삭제해준다.
- `form` 이 나타난 후 값을 받으면 `submit` event가 발생하고 이 때 `onLoginSubmit` 함수를 실행시켜 준다.
- local storage에 값을 저장해주고 유저에게 인사해주기. 이 때, else 문에서도 같은 일을 해야 하므로 함수로 따로 코드 작성하고 호출
- `paintGreetings`함수를 통해 유저에게 인사



`paintGreetings` 함수는 값이 없을 경우 `if`문 => `onLoginSubmit` 함수 호출 => `paintGreetings` 함소 호출 경로로 오게 되고, 값이 이미 존재할 경우에는 새로고침을 하더라도 `else`문 => `paintGreeings` 함소 호출 경로로 오게 된다. 그러므로 값이 있을 경우에는 `hidden` class를 삭제해주지 않기 때문에 숨겨져 있고 `form` 형태가 다시 나타나는 과정을 없앨 수 있다.