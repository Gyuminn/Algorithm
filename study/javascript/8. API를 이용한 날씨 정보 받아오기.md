## API를 이용해 날씨 정보 받아오기



openwether 홈페이지를 통해 API를 이용하여 날씨 정보를 쉽게 받아올 수 있다. `fetch`를 통해 javascript가 `url`을 불러온다. 이 부분과 관련해서는 백엔드 부분에서 많이 다루기 때문에 이번 챕터에서는 가볍게 보고 넘어가도록 하자. 



> https://openweathermap.org/



위 홈페이지에서 계정을 만들고 그 계정의 `API key` 을 복사해 변수로 저장하여 사용하면 된다.  API 문서를 살펴보면 `API call`과 `parameter`에 대한 설명이 있으니 이를 읽어보고 원하는 요구사항에 알맞은 값들을 넣어주면 원하는 정보를 얻을 수 있다.



```javascript
const API_KEY = "블라블라";
//openwether 홈페이지에 내 계정 API Key에 있는 값이다. 숫자와 영어로 이루어진 이 값을 포스팅을 위해 임의로 변경하였다.

function onGeoOk(position){
    const lat = position.coords.latitude; 
    const lon = position.coords.longitude;
    const url = `https://api.openweathermap.org/data/2.5/weather?/lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;
    
    fetch(url)
    .then(response => response.json())
    .then(data => {
        const weather= document.querySelector("#weather span:first-child");
        const city= document.querySelector("#weather span:last-child");
        weather.innerText = `${data.weather[0].main} / ${data.main.temp}`
        city.innerText = data.name;
    });
    //fetch를 통해서 javascript가 url을 부른다.
    //그 다음부분은 사실상 백엔드부분에서 많이 다루는 부분이라 일단 넘어감.
}

function onGeoError(){
    alert("Can't find you. No weather for you");
}

navigator.geolocation.getCurrentPosition(onGeoOk,onGeoError); // 정상실행이 될 경우와 정상실행이 안될 경우
```



아직은 위 코드에 대해 잘 모르는 부분이 존재하지만 API를 이용해 쉽게 날씨 정보를 받아올 수 있다는 것이 신기했다.



> 이 포스팅은 노마드코더 클론코딩 강의를 기반으로 재구성하였습니다.